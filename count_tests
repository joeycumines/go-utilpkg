#!/bin/bash
log_file="/Users/joeyc/dev/go-utilpkg/eventloop_full_60s.log"

# Count top-level tests (=== RUN)
total_tests=$(grep -c "^=== RUN   [^/]" "$log_file")
passed_tests=$(grep -c "^--- PASS: [^/]" "$log_file")
failed_tests=$(grep -c "^--- FAIL: [^/]" "$log_file")

# List failed tests
echo "=== FAILED TESTS ==="
grep "^--- FAIL:" "$log_file" | sed 's/--- FAIL: //; s/ (.*//'
echo ""

echo "=== TEST SUMMARY ==="
echo "Total tests: $total_tests"
echo "Passed: $passed_tests"
echo "Failed: $failed_tests"
echo ""

# Get total execution time
exec_time=$(grep "^FAIL" "$log_file" | grep -oE '[0-9.]+s$' || echo "N/A")
echo "Total execution time: $exec_time"
