{
  "meta": {
    "fileName": "blueprint.json",
    "maintenanceInstruction": "KEEP THE PLAN UP TO DATE AS YOU EVOLVE THE CODE. DEVIATIONS TO THE PLAN MUST BE LOGGED WITHIN THE PLAN. THE PLAN MUST BE REASSESSED HOLISTICALLY AFTER ANY CHANGE OF ANY SIZE.",
    "completionPolicy": "YOU ARE NOT DONE UNTIL EVERY SINGLE TASK IS CHECKED OFF AND VERIFIED WITH DOUBLE-CYCLE REVIEW. DO NOT STOP. EXPAND SCOPE CONTINUALLY."
  },
  "globalAlerts": [
    {"warning": "USE GMAKE NOT MAKE. macOS make is BSD make 3.81, too old."},
    {"warning": "PIPE OUTPUT. Use piped tail/tee for large outputs to avoid context explosion."},
    {"warning": "TIMING DEPENDENT TESTS ARE BANNED. Use synchronization primitives only."},
    {"warning": "STRICT SERIAL SUBAGENT EXECUTION. Do not parallelize subagent spawning."},
    {"warning": "Windows host is 'moo'. Linux via Docker. macOS is local."},
    {"warning": "DO NOT USE TESTIFY. Only built-in testing package."}
  ],
  "mandatoryDirectives": {
    "contextManagement": "Tasks are executed sequentially. Break into manageable units to prevent context window exhaustion.",
    "subagentPolicy": "Subagents for review (Rule of Two) run serially. Work subagents must NOT self-review.",
    "ruleOfTwo": "Every commit requires TWO contiguous, issue-free hostile review passes on the EXACT SAME diff."
  },
  "statusSection": {
    "currentState": "MULTI-MODULE CLEANUP COMMITTED. caf0c15 (logiface-slog), 904c28f (Emergency panic fix), 8f1f12b (goja-eventloop AI slop), c1c553a (eventloop tags + testify removal from goja-grpc/protobuf/protojson). macOS full suite PASS.",
    "lastAction": "Committed c1c553a: Strip AI tags from eventloop (6 prod + 38 test files), delete 4 testify/junk files. Convert goja-grpc (21 files), goja-protobuf (16 files), goja-protojson (2 files) from testifyâ†’testing. Remove testify deps. Rule of Two 2/2 PASS. gmake make-all-with-log PASS (25 modules, 0 failures)."
  },
  "sequentialTasks": [
    {
      "task": "logiface-slog: Strip doc comments, delete slop files, fix bugs, clean deps",
      "description": "COMMITTED caf0c15.",
      "status": "Done"
    },
    {
      "task": "FAST-FOLLOW: Remove Emergency panic from slog adapter",
      "description": "COMMITTED 904c28f. Hana directive.",
      "status": "Done"
    },
    {
      "task": "goja-eventloop: Remove AI slop (tags, junk files, testify, CHANGELOG)",
      "description": "COMMITTED 8f1f12b. 43 files changed, +275/-7644. Deleted 8 files (4 debug junk, 4 testify). Stripped ~180 AI tags. Cleaned CHANGELOG. Removed testify from go.mod.",
      "status": "Done"
    },
    {
      "task": "eventloop: Strip AI tags from 6 prod + 38 test files, delete 4 junk files",
      "description": "COMMITTED c1c553a. 30 AI tags stripped from production code (promise.go, loop.go, ingress.go, options.go, js.go, eventtarget.go). 43 tags stripped from 38 test files. Deleted coverage_phase3_test.go, coverage_phase3b_test.go, fastpath_debug_test.go, wake_debug_test.go.",
      "status": "Done"
    },
    {
      "task": "goja-grpc: Convert 21 test files from testify to standard testing",
      "description": "COMMITTED c1c553a. All assert/require calls converted. testify removed from go.mod.",
      "status": "Done"
    },
    {
      "task": "goja-protobuf: Convert 16 test files from testify to standard testing",
      "description": "COMMITTED c1c553a. All assert/require calls converted. testify removed from go.mod.",
      "status": "Done"
    },
    {
      "task": "goja-protojson: Convert 2 test files from testify to standard testing",
      "description": "COMMITTED c1c553a. testhelpers_test.go and module_test.go converted. testify removed from go.mod.",
      "status": "Done"
    },
    {
      "task": "macOS full suite verification",
      "description": "gmake make-all-with-log PASS. 25 modules, 0 failures, 0 warnings.",
      "status": "Done"
    },
    {
      "task": "Cross-platform: Full suite Linux",
      "description": "Run 'gmake make-all-in-container'. Zero failures.",
      "status": "Not Started"
    },
    {
      "task": "Cross-platform: Full suite Windows",
      "description": "Run 'gmake make-all-run-windows'. Zero failures.",
      "status": "Not Started"
    },
    {
      "task": "logiface core: Review for ill-conceived additions",
      "description": "Check logiface/ for recently added features (AddGroup etc). Compare API surface against what adapters actually use. Run tests and vet.",
      "status": "Not Started"
    },
    {
      "task": "logiface-testsuite: Review for slog-specific additions",
      "description": "Check if testsuite was modified with slog-specific exemptions. Verify changes are sound.",
      "status": "Not Started"
    },
    {
      "task": "Scope expansion: Run deadcode across all modules",
      "description": "Run 'gmake deadcode'. Remove actual dead code.",
      "status": "Not Started"
    },
    {
      "task": "Scope expansion: Run betteralign across all modules",
      "description": "Run 'gmake betteralign'. Apply struct alignment fixes.",
      "status": "Not Started"
    },
    {
      "task": "Scope expansion: Verify adapter consistency",
      "description": "Compare API surface across all logiface adapters (zerolog, logrus, stumpy, slog). Document inconsistencies.",
      "status": "Not Started"
    }
  ],
  "continuousVerification": {
    "task": "Run project-defined checks after EVERY significant change",
    "buildCommand": "gmake build",
    "testCommand": "gmake test",
    "moduleTestCommand": "gmake test.<module-slug>",
    "lintCommand": "gmake vet.<module-slug>",
    "allPlatformsCommand": "gmake make-all-with-log && gmake make-all-in-container && gmake make-all-run-windows",
    "failPolicy": "If ANY test fails, STOP and fix before proceeding. Zero tolerance.",
    "testCoverage": "100% target. Verify with -coverprofile. Document justified gaps."
  },
  "finalEnforcementProtocol": [
    "USE GMAKE NOT MAKE on macOS.",
    "PIPE OUTPUT through tail/tee for large commands.",
    "RULE OF TWO: Two contiguous hostile reviews on SAME diff before commit.",
    "ALL PLATFORMS: macOS, Linux (Docker), Windows (moo) must pass.",
    "NO TESTIFY: Only built-in testing package."
  ]
}
