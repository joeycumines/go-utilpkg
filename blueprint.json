{
    "policy": "ALL tasks and subtasks contained within this blueprint MUST be completed in their entirety. Deferring, skipping, or omitting any part of the plan is strictly prohibited. Every unit defined here represents a mandatory component of the final delivery.",
    "tasks": [
        {
            "id": "1",
            "title": "Phase 1: Core Architecture & JS Interop (P0)",
            "status": "pending",
            "description": "Establish the modular architecture with eventloop.JS, dual-options pattern, and robust timer system.",
            "subtasks": [
                {
                    "id": "1.1",
                    "title": "Timer ID System",
                    "description": "Implement timer identification and cancellation system.",
                    "subtasks": [
                        {
                            "id": "1.1.1",
                            "title": "Define TimerID type",
                            "description": "Add `type TimerID uint64` to loop.go. Verify: type exists and compiles.",
                            "status": "pending"
                        },
                        {
                            "id": "1.1.2",
                            "title": "Extend timer struct",
                            "description": "Add `id TimerID`, `canceled atomic.Bool`, and `heapIndex int` fields to timer struct. Verify: struct compiles with new fields.",
                            "status": "pending"
                        },
                        {
                            "id": "1.1.3",
                            "title": "Add timer tracking to Loop",
                            "description": "Add `timerMap map[TimerID]*timer` and `nextTimerID atomic.Uint64` to Loop struct. Initialize in constructor. Verify: fields exist and are initialized.",
                            "status": "pending"
                        },
                        {
                            "id": "1.1.4",
                            "title": "Update ScheduleTimer signature",
                            "description": "Change `ScheduleTimer(delay, fn) error` to `ScheduleTimer(delay, fn) (TimerID, error)`. Verify: new signature compiles.",
                            "status": "pending"
                        },
                        {
                            "id": "1.1.5",
                            "title": "Implement timer ID generation",
                            "description": "Generate unique ID via `nextTimerID.Add(1)` in ScheduleTimer. Store timer in timerMap. Verify: IDs are unique across 1000 timers.",
                            "status": "pending"
                        },
                        {
                            "id": "1.1.6",
                            "title": "Implement heap index tracking",
                            "description": "Update timerHeap Push/Pop to maintain heapIndex on each timer. Verify: heapIndex correct after push/pop/fix operations.",
                            "status": "pending"
                        },
                        {
                            "id": "1.1.7",
                            "title": "Implement CancelTimer",
                            "description": "Add `CancelTimer(id TimerID) error`. Use heap.Remove with heapIndex, delete from timerMap. Verify: canceled timer does not fire.",
                            "status": "pending"
                        },
                        {
                            "id": "1.1.8",
                            "title": "Define ErrTimerNotFound",
                            "description": "Add `var ErrTimerNotFound = errors.New(\"timer not found\")`. Verify: CancelTimer returns this for invalid IDs.",
                            "status": "pending"
                        },
                        {
                            "id": "1.1.9",
                            "title": "Test: Cancel before expiration",
                            "description": "Schedule timer, cancel immediately, verify callback never runs. Verify: test passes.",
                            "status": "pending"
                        },
                        {
                            "id": "1.1.10",
                            "title": "Test: Cancel after expiration",
                            "description": "Schedule timer, wait for fire, then cancel. Verify: no error or panic, returns ErrTimerNotFound.",
                            "status": "pending"
                        },
                        {
                            "id": "1.1.11",
                            "title": "Test: Rapid successive cancellations",
                            "description": "Schedule 100 timers, cancel them in random order. Verify: all cancellations succeed, no callbacks fire.",
                            "status": "pending"
                        },
                        {
                            "id": "1.1.12",
                            "title": "Test: Cancel from different goroutine",
                            "description": "Schedule timer on loop, cancel from external goroutine. Run with -race. Verify: no race, correct behavior.",
                            "status": "pending"
                        },
                        {
                            "id": "1.1.13",
                            "title": "Test: Stress 1000 timers, cancel 50%",
                            "description": "Schedule 1000 timers, cancel 500 during execution. Verify: exactly 500 callbacks fire.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                },
                {
                    "id": "1.2",
                    "title": "Options System",
                    "description": "Implement functional options pattern for Loop configuration.",
                    "subtasks": [
                        {
                            "id": "1.2.1",
                            "title": "Create options.go file",
                            "description": "Create new file eventloop/options.go. Verify: file exists.",
                            "status": "pending"
                        },
                        {
                            "id": "1.2.2",
                            "title": "Define LoopOption type",
                            "description": "Add `type LoopOption func(*loopOptions)` and `type loopOptions struct`. Verify: compiles.",
                            "status": "pending"
                        },
                        {
                            "id": "1.2.3",
                            "title": "Add StrictMicrotaskOrdering option",
                            "description": "Add `WithStrictMicrotaskOrdering(bool) LoopOption`. Verify: option function exists.",
                            "status": "pending"
                        },
                        {
                            "id": "1.2.4",
                            "title": "Add FastPathMode option",
                            "description": "Add `WithFastPathMode(FastPathMode) LoopOption`. Verify: option function exists.",
                            "status": "pending"
                        },
                        {
                            "id": "1.2.5",
                            "title": "Refactor New() to accept options",
                            "description": "Change `New()` to `New(opts ...LoopOption)`. Apply options to loopOptions, then to Loop. Verify: existing tests still pass.",
                            "status": "pending"
                        },
                        {
                            "id": "1.2.6",
                            "title": "Test: Default options",
                            "description": "Call New() with no args. Verify: StrictMicrotaskOrdering=false, FastPathMode=default.",
                            "status": "pending"
                        },
                        {
                            "id": "1.2.7",
                            "title": "Test: Custom options",
                            "description": "Call New(WithStrictMicrotaskOrdering(true)). Verify: StrictMicrotaskOrdering=true.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                },
                {
                    "id": "1.3",
                    "title": "eventloop.JS Core Structure",
                    "description": "Create the JS adapter struct and basic setup.",
                    "subtasks": [
                        {
                            "id": "1.3.1",
                            "title": "Create js.go file",
                            "description": "Create new file eventloop/js.go with package declaration. Verify: file exists, compiles.",
                            "status": "pending"
                        },
                        {
                            "id": "1.3.2",
                            "title": "Define JS struct",
                            "description": "Add `type JS struct` with fields: `loop *Loop`, `nextTimerID atomic.Uint64`, `timers sync.Map`. Verify: struct compiles.",
                            "status": "pending"
                        },
                        {
                            "id": "1.3.3",
                            "title": "Define JSOption type",
                            "description": "Add `type JSOption func(*jsOptions)` and supporting struct. Verify: compiles.",
                            "status": "pending"
                        },
                        {
                            "id": "1.3.4",
                            "title": "Implement NewJS constructor",
                            "description": "Add `NewJS(loop *Loop, opts ...JSOption) *JS`. Initialize all fields. Verify: returns valid JS instance.",
                            "status": "pending"
                        },
                        {
                            "id": "1.3.5",
                            "title": "Test: NewJS basic creation",
                            "description": "Create Loop, call NewJS(loop). Verify: JS instance non-nil, loop reference correct.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                },
                {
                    "id": "1.4",
                    "title": "setTimeout/clearTimeout Logic",
                    "description": "Implement timer scheduling logic in eventloop.JS (runtime-agnostic).",
                    "subtasks": [
                        {
                            "id": "1.4.1",
                            "title": "Define SetTimeoutFunc type",
                            "description": "Add `type SetTimeoutFunc func()` for timer callbacks. Verify: type exists.",
                            "status": "pending"
                        },
                        {
                            "id": "1.4.2",
                            "title": "Implement SetTimeout method",
                            "description": "Add `(js *JS) SetTimeout(fn SetTimeoutFunc, delayMs int) (uint64, error)`. Call loop.ScheduleTimer, track ID. Verify: returns ID, schedules timer.",
                            "status": "pending"
                        },
                        {
                            "id": "1.4.3",
                            "title": "Implement ClearTimeout method",
                            "description": "Add `(js *JS) ClearTimeout(id uint64) error`. Call loop.CancelTimer, cleanup tracking. Verify: timer canceled.",
                            "status": "pending"
                        },
                        {
                            "id": "1.4.4",
                            "title": "Implement SetInterval method",
                            "description": "Add `(js *JS) SetInterval(fn, delayMs) (uint64, error)`. Reschedule in callback. Verify: fires repeatedly.",
                            "status": "pending"
                        },
                        {
                            "id": "1.4.5",
                            "title": "Implement ClearInterval method",
                            "description": "Add `(js *JS) ClearInterval(id uint64) error`. Cancel and stop rescheduling. Verify: interval stops.",
                            "status": "pending"
                        },
                        {
                            "id": "1.4.6",
                            "title": "Test: SetTimeout executes",
                            "description": "SetTimeout with 10ms delay. Verify: callback fires after ~10ms.",
                            "status": "pending"
                        },
                        {
                            "id": "1.4.7",
                            "title": "Test: ClearTimeout prevents execution",
                            "description": "SetTimeout, immediately ClearTimeout. Verify: callback never fires.",
                            "status": "pending"
                        },
                        {
                            "id": "1.4.8",
                            "title": "Test: SetInterval fires multiple times",
                            "description": "SetInterval 10ms. Verify: fires at least 3 times before clear.",
                            "status": "pending"
                        },
                        {
                            "id": "1.4.9",
                            "title": "Test: ClearInterval stops firing",
                            "description": "SetInterval, wait 2 fires, ClearInterval. Verify: no more fires.",
                            "status": "pending"
                        },
                        {
                            "id": "1.4.10",
                            "title": "Test: Timer re-entrancy",
                            "description": "SetTimeout that schedules another SetTimeout. Verify: both fire in order.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                },
                {
                    "id": "1.5",
                    "title": "queueMicrotask Logic",
                    "description": "Implement microtask scheduling in eventloop.JS.",
                    "subtasks": [
                        {
                            "id": "1.5.1",
                            "title": "Define MicrotaskFunc type",
                            "description": "Add `type MicrotaskFunc func()`. Verify: type exists.",
                            "status": "pending"
                        },
                        {
                            "id": "1.5.2",
                            "title": "Implement QueueMicrotask method",
                            "description": "Add `(js *JS) QueueMicrotask(fn MicrotaskFunc) error`. Call loop.ScheduleMicrotask. Verify: microtask queued.",
                            "status": "pending"
                        },
                        {
                            "id": "1.5.3",
                            "title": "Test: Microtask executes",
                            "description": "QueueMicrotask, run loop. Verify: callback fires.",
                            "status": "pending"
                        },
                        {
                            "id": "1.5.4",
                            "title": "Test: Microtask ordering",
                            "description": "Queue 3 microtasks. Verify: execute in FIFO order.",
                            "status": "pending"
                        },
                        {
                            "id": "1.5.5",
                            "title": "Test: Microtask before timer",
                            "description": "SetTimeout(0ms), QueueMicrotask. Verify: microtask fires first.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                },
                {
                    "id": "1.6",
                    "title": "Promise State Machine",
                    "description": "Implement runtime-agnostic Promise logic.",
                    "subtasks": [
                        {
                            "id": "1.6.1",
                            "title": "Define PromiseState enum",
                            "description": "Add `type PromiseState int` with Pending, Fulfilled, Rejected. Verify: constants exist.",
                            "status": "pending"
                        },
                        {
                            "id": "1.6.2",
                            "title": "Define Promise struct",
                            "description": "Add `type Promise struct` with state, value, reason, handlers. Verify: struct compiles.",
                            "status": "pending"
                        },
                        {
                            "id": "1.6.3",
                            "title": "Implement NewPromise",
                            "description": "Add constructor returning (promise, resolve, reject). Verify: promise starts Pending.",
                            "status": "pending"
                        },
                        {
                            "id": "1.6.4",
                            "title": "Implement resolve function",
                            "description": "Resolve transitions to Fulfilled, triggers handlers. Verify: state=Fulfilled after resolve.",
                            "status": "pending"
                        },
                        {
                            "id": "1.6.5",
                            "title": "Implement reject function",
                            "description": "Reject transitions to Rejected, triggers handlers. Verify: state=Rejected after reject.",
                            "status": "pending"
                        },
                        {
                            "id": "1.6.6",
                            "title": "Implement Then method",
                            "description": "Add `(p *Promise) Then(onFulfilled, onRejected) *Promise`. Chain handlers, schedule microtask. Verify: returns new Promise.",
                            "status": "pending"
                        },
                        {
                            "id": "1.6.7",
                            "title": "Implement Catch method",
                            "description": "Add `(p *Promise) Catch(onRejected) *Promise`. Equivalent to Then(nil, onRejected). Verify: catches rejections.",
                            "status": "pending"
                        },
                        {
                            "id": "1.6.8",
                            "title": "Implement Finally method",
                            "description": "Add `(p *Promise) Finally(onFinally) *Promise`. Runs regardless of outcome. Verify: always runs.",
                            "status": "pending"
                        },
                        {
                            "id": "1.6.9",
                            "title": "Handle already-settled promise",
                            "description": "Then on settled promise schedules microtask immediately. Verify: handler still runs async.",
                            "status": "pending"
                        },
                        {
                            "id": "1.6.10",
                            "title": "Test: Basic resolve/then",
                            "description": "Create promise, resolve(42), then(). Verify: handler receives 42.",
                            "status": "pending"
                        },
                        {
                            "id": "1.6.11",
                            "title": "Test: Basic reject/catch",
                            "description": "Create promise, reject(err), catch(). Verify: handler receives err.",
                            "status": "pending"
                        },
                        {
                            "id": "1.6.12",
                            "title": "Test: 3-level chaining",
                            "description": "p.then().then().then(). Verify: all handlers fire in order.",
                            "status": "pending"
                        },
                        {
                            "id": "1.6.13",
                            "title": "Test: Error propagation",
                            "description": "p.then(throw).then().catch(). Verify: catch receives error.",
                            "status": "pending"
                        },
                        {
                            "id": "1.6.14",
                            "title": "Test: Multiple then on same promise",
                            "description": "p.then(a); p.then(b). Verify: both handlers called.",
                            "status": "pending"
                        },
                        {
                            "id": "1.6.15",
                            "title": "Test: Then after resolve",
                            "description": "Resolve first, then attach handler. Verify: handler still fires.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                },
                {
                    "id": "1.7",
                    "title": "Unhandled Rejection Tracking",
                    "description": "Track and report unhandled promise rejections.",
                    "subtasks": [
                        {
                            "id": "1.7.1",
                            "title": "Add rejection tracking fields",
                            "description": "Add `rejections map[uint64]*rejectionInfo`, `handlers map[uint64]bool` to JS struct. Verify: fields exist.",
                            "status": "pending"
                        },
                        {
                            "id": "1.7.2",
                            "title": "Define rejectionInfo struct",
                            "description": "Add struct with promiseID, reason, timestamp. Verify: struct compiles.",
                            "status": "pending"
                        },
                        {
                            "id": "1.7.3",
                            "title": "Implement trackRejection",
                            "description": "Record rejection when promise rejects. Schedule check microtask. Verify: rejections recorded.",
                            "status": "pending"
                        },
                        {
                            "id": "1.7.4",
                            "title": "Implement registerCatchHandler",
                            "description": "Mark promise as handled when catch attached. Verify: handlers map updated.",
                            "status": "pending"
                        },
                        {
                            "id": "1.7.5",
                            "title": "Implement checkUnhandledRejections",
                            "description": "After microtask drain, check for unhandled rejections. Emit event if found. Verify: unhandled rejections detected.",
                            "status": "pending"
                        },
                        {
                            "id": "1.7.6",
                            "title": "Define OnUnhandledRejection callback",
                            "description": "Add configurable callback for unhandled rejections. Verify: callback invoked.",
                            "status": "pending"
                        },
                        {
                            "id": "1.7.7",
                            "title": "Test: Unhandled rejection detected",
                            "description": "Reject promise without catch. Verify: OnUnhandledRejection called.",
                            "status": "pending"
                        },
                        {
                            "id": "1.7.8",
                            "title": "Test: Handled rejection not reported",
                            "description": "Reject promise with catch. Verify: OnUnhandledRejection NOT called.",
                            "status": "pending"
                        },
                        {
                            "id": "1.7.9",
                            "title": "Test: Late handler attached",
                            "description": "Reject, pause, attach catch. Verify: rejectionhandled event (if implemented).",
                            "status": "pending"
                        },
                        {
                            "id": "1.7.10",
                            "title": "Test: Multiple unhandled rejections",
                            "description": "Reject 3 promises without catch. Verify: 3 events emitted.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                },
                {
                    "id": "1.8",
                    "title": "Core Unit Tests",
                    "description": "Comprehensive tests for eventloop.JS in isolation.",
                    "subtasks": [
                        {
                            "id": "1.8.1",
                            "title": "Create js_test.go",
                            "description": "Create eventloop/js_test.go. Verify: file exists.",
                            "status": "pending"
                        },
                        {
                            "id": "1.8.2",
                            "title": "Test timer stress: 1000 timers",
                            "description": "Schedule 1000 timers, verify all fire. Verify: test passes.",
                            "status": "pending"
                        },
                        {
                            "id": "1.8.3",
                            "title": "Test microtask stress: 1000 microtasks",
                            "description": "Queue 1000 microtasks, verify all execute in order. Verify: test passes.",
                            "status": "pending"
                        },
                        {
                            "id": "1.8.4",
                            "title": "Test promise stress: 100 chains",
                            "description": "Create 100 promise chains of depth 10. Verify: all resolve correctly.",
                            "status": "pending"
                        },
                        {
                            "id": "1.8.5",
                            "title": "Test mixed workload",
                            "description": "Combine timers, microtasks, promises. Verify: correct ordering.",
                            "status": "pending"
                        },
                        {
                            "id": "1.8.6",
                            "title": "Run all tests with -race",
                            "description": "Execute `go test -race ./eventloop/...`. Verify: no races detected.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                }
            ]
        },
        {
            "id": "2",
            "title": "Phase 2: Goja Integration Module (P0)",
            "status": "pending",
            "description": "Implement the specific adapter for Goja in a separate module.",
            "subtasks": [
                {
                    "id": "2.1",
                    "title": "Module Setup",
                    "description": "Initialize goja-eventloop Go module.",
                    "subtasks": [
                        {
                            "id": "2.1.1",
                            "title": "Create module directory",
                            "description": "Create goja-eventloop/ directory. Verify: directory exists.",
                            "status": "pending"
                        },
                        {
                            "id": "2.1.2",
                            "title": "Initialize go.mod",
                            "description": "Run `go mod init` for goja-eventloop. Verify: go.mod exists with correct module path.",
                            "status": "pending"
                        },
                        {
                            "id": "2.1.3",
                            "title": "Add goja dependency",
                            "description": "Run `go get github.com/dop251/goja`. Verify: goja in go.mod.",
                            "status": "pending"
                        },
                        {
                            "id": "2.1.4",
                            "title": "Add eventloop dependency",
                            "description": "Add replace directive or version for local eventloop. Verify: builds.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                },
                {
                    "id": "2.2",
                    "title": "Goja Adapter Implementation",
                    "description": "Bridge goja runtime to eventloop.JS.",
                    "subtasks": [
                        {
                            "id": "2.2.1",
                            "title": "Create goja_eventloop.go",
                            "description": "Create main adapter file. Verify: file exists.",
                            "status": "pending"
                        },
                        {
                            "id": "2.2.2",
                            "title": "Define Adapter struct",
                            "description": "Add struct with `js *eventloop.JS`, `runtime *goja.Runtime`. Verify: compiles.",
                            "status": "pending"
                        },
                        {
                            "id": "2.2.3",
                            "title": "Implement New constructor",
                            "description": "Add `New(loop, runtime) *Adapter`. Create JS instance, store runtime. Verify: returns valid adapter.",
                            "status": "pending"
                        },
                        {
                            "id": "2.2.4",
                            "title": "Implement setTimeout binding",
                            "description": "Bind JS setTimeout to goja global. Convert FunctionCall to SetTimeoutFunc. Verify: callable from JS.",
                            "status": "pending"
                        },
                        {
                            "id": "2.2.5",
                            "title": "Implement clearTimeout binding",
                            "description": "Bind JS clearTimeout to goja global. Extract ID, call ClearTimeout. Verify: callable from JS.",
                            "status": "pending"
                        },
                        {
                            "id": "2.2.6",
                            "title": "Implement setInterval binding",
                            "description": "Bind JS setInterval to goja global. Verify: callable from JS.",
                            "status": "pending"
                        },
                        {
                            "id": "2.2.7",
                            "title": "Implement clearInterval binding",
                            "description": "Bind JS clearInterval to goja global. Verify: callable from JS.",
                            "status": "pending"
                        },
                        {
                            "id": "2.2.8",
                            "title": "Implement queueMicrotask binding",
                            "description": "Bind JS queueMicrotask to goja global. Verify: callable from JS.",
                            "status": "pending"
                        },
                        {
                            "id": "2.2.9",
                            "title": "Implement Promise bindings",
                            "description": "Bridge Promise.then/catch/finally to eventloop.JS Promise. Verify: chaining works from JS.",
                            "status": "pending"
                        },
                        {
                            "id": "2.2.10",
                            "title": "Implement thread safety check",
                            "description": "Add ensureLoopThread() that panics if called from wrong goroutine. Verify: panic on violation.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                },
                {
                    "id": "2.3",
                    "title": "Integration Tests",
                    "description": "End-to-end tests with actual JavaScript code.",
                    "subtasks": [
                        {
                            "id": "2.3.1",
                            "title": "Create goja_test.go",
                            "description": "Create test file in goja-eventloop/. Verify: file exists.",
                            "status": "pending"
                        },
                        {
                            "id": "2.3.2",
                            "title": "Test: setTimeout from JS",
                            "description": "Run `setTimeout(() => {}, 10)` in goja. Verify: callback fires.",
                            "status": "pending"
                        },
                        {
                            "id": "2.3.3",
                            "title": "Test: clearTimeout from JS",
                            "description": "Run `clearTimeout(setTimeout(...))`. Verify: callback does not fire.",
                            "status": "pending"
                        },
                        {
                            "id": "2.3.4",
                            "title": "Test: setInterval from JS",
                            "description": "Run `setInterval`, count fires. Verify: fires multiple times.",
                            "status": "pending"
                        },
                        {
                            "id": "2.3.5",
                            "title": "Test: queueMicrotask from JS",
                            "description": "Run `queueMicrotask(() => {})`. Verify: callback fires.",
                            "status": "pending"
                        },
                        {
                            "id": "2.3.6",
                            "title": "Test: Promise.then from JS",
                            "description": "Run `Promise.resolve(1).then(x => x+1)`. Verify: resolves to 2.",
                            "status": "pending"
                        },
                        {
                            "id": "2.3.7",
                            "title": "Test: Promise chain from JS",
                            "description": "Run `p.then().then().then()`. Verify: all handlers fire.",
                            "status": "pending"
                        },
                        {
                            "id": "2.3.8",
                            "title": "Test: Mixed timers and promises",
                            "description": "setTimeout + Promise.resolve().then(). Verify: microtask before timer.",
                            "status": "pending"
                        },
                        {
                            "id": "2.3.9",
                            "title": "Test: Context cancellation",
                            "description": "Cancel context with pending timers. Verify: clean shutdown.",
                            "status": "pending"
                        },
                        {
                            "id": "2.3.10",
                            "title": "Test: Stress 100 concurrent JS operations",
                            "description": "Run 100 timers + 100 promises. Verify: all complete correctly.",
                            "status": "pending"
                        },
                        {
                            "id": "2.3.11",
                            "title": "Run all tests with -race",
                            "description": "Execute `go test -race ./goja-eventloop/...`. Verify: no races.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                }
            ]
        },
        {
            "id": "3",
            "title": "Phase 3: Promise Combinators (P1)",
            "status": "pending",
            "description": "Implement Promise.all, Promise.race, Promise.allSettled, Promise.any.",
            "subtasks": [
                {
                    "id": "3.1",
                    "title": "Promise.all Implementation",
                    "description": "Implement Promise.all combinator.",
                    "subtasks": [
                        {
                            "id": "3.1.1",
                            "title": "Implement All method",
                            "description": "Add `All(promises []*Promise) *Promise`. Track completion of all. Verify: method exists.",
                            "status": "pending"
                        },
                        {
                            "id": "3.1.2",
                            "title": "Handle empty array",
                            "description": "All([]) resolves immediately with []. Verify: returns empty array.",
                            "status": "pending"
                        },
                        {
                            "id": "3.1.3",
                            "title": "Collect results in order",
                            "description": "Results array matches input order. Verify: order preserved.",
                            "status": "pending"
                        },
                        {
                            "id": "3.1.4",
                            "title": "Reject on first rejection",
                            "description": "Any rejection rejects All immediately. Verify: first rejection wins.",
                            "status": "pending"
                        },
                        {
                            "id": "3.1.5",
                            "title": "Test: All with all resolved",
                            "description": "All([p1, p2, p3]) where all resolve. Verify: resolves with [v1,v2,v3].",
                            "status": "pending"
                        },
                        {
                            "id": "3.1.6",
                            "title": "Test: All with one rejected",
                            "description": "All([p1, p2_rejected, p3]). Verify: rejects with p2's reason.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                },
                {
                    "id": "3.2",
                    "title": "Promise.race Implementation",
                    "description": "Implement Promise.race combinator.",
                    "subtasks": [
                        {
                            "id": "3.2.1",
                            "title": "Implement Race method",
                            "description": "Add `Race(promises []*Promise) *Promise`. First to settle wins. Verify: method exists.",
                            "status": "pending"
                        },
                        {
                            "id": "3.2.2",
                            "title": "Handle empty array",
                            "description": "Race([]) never settles (or rejects). Verify: stays pending.",
                            "status": "pending"
                        },
                        {
                            "id": "3.2.3",
                            "title": "First resolved wins",
                            "description": "If p1 resolves first, Race resolves. Verify: correct winner.",
                            "status": "pending"
                        },
                        {
                            "id": "3.2.4",
                            "title": "First rejected wins",
                            "description": "If p1 rejects first, Race rejects. Verify: correct reason.",
                            "status": "pending"
                        },
                        {
                            "id": "3.2.5",
                            "title": "Test: Race timing",
                            "description": "Race promises with different delays. Verify: fastest wins.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                },
                {
                    "id": "3.3",
                    "title": "Promise.allSettled Implementation",
                    "description": "Implement Promise.allSettled combinator.",
                    "subtasks": [
                        {
                            "id": "3.3.1",
                            "title": "Implement AllSettled method",
                            "description": "Add `AllSettled(promises []*Promise) *Promise`. Wait for all. Verify: method exists.",
                            "status": "pending"
                        },
                        {
                            "id": "3.3.2",
                            "title": "Return status objects",
                            "description": "Return [{status, value/reason}, ...]. Verify: correct format.",
                            "status": "pending"
                        },
                        {
                            "id": "3.3.3",
                            "title": "Test: Mixed results",
                            "description": "AllSettled with some resolved, some rejected. Verify: all results captured.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                },
                {
                    "id": "3.4",
                    "title": "Promise.any Implementation",
                    "description": "Implement Promise.any combinator.",
                    "subtasks": [
                        {
                            "id": "3.4.1",
                            "title": "Implement Any method",
                            "description": "Add `Any(promises []*Promise) *Promise`. First resolved wins. Verify: method exists.",
                            "status": "pending"
                        },
                        {
                            "id": "3.4.2",
                            "title": "Reject if all reject",
                            "description": "AggregateError if no promise resolves. Verify: correct error type.",
                            "status": "pending"
                        },
                        {
                            "id": "3.4.3",
                            "title": "Test: First resolved wins",
                            "description": "Any with p1 resolved, p2 rejected. Verify: resolves with p1 value.",
                            "status": "pending"
                        },
                        {
                            "id": "3.4.4",
                            "title": "Test: All rejected",
                            "description": "Any with all rejected. Verify: rejects with AggregateError.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                }
            ]
        },
        {
            "id": "4",
            "title": "Phase 4: Platform Support & Hardening (P0 - MANDATED)",
            "status": "pending",
            "description": "Mandatory platform expansion and specification compliance. NO DEFERRALS.",
            "subtasks": [
                {
                    "id": "4.1",
                    "title": "Windows IOCP Support",
                    "description": "Implement Windows I/O completion ports poller.",
                    "subtasks": [
                        {
                            "id": "4.1.1",
                            "title": "Create poller_windows.go",
                            "description": "Create file with //go:build windows. Verify: file exists.",
                            "status": "pending"
                        },
                        {
                            "id": "4.1.2",
                            "title": "Implement FastPoller struct",
                            "description": "Add struct with iocpHandle, workerPool. Verify: compiles on Windows.",
                            "status": "pending"
                        },
                        {
                            "id": "4.1.3",
                            "title": "Implement Init method",
                            "description": "Create IOCP via CreateIoCompletionPort. Verify: handle valid.",
                            "status": "pending"
                        },
                        {
                            "id": "4.1.4",
                            "title": "Implement RegisterFD",
                            "description": "Associate FD with IOCP. Verify: registration succeeds.",
                            "status": "pending"
                        },
                        {
                            "id": "4.1.5",
                            "title": "Implement PollIO",
                            "description": "GetQueuedCompletionStatus with timeout. Verify: returns events.",
                            "status": "pending"
                        },
                        {
                            "id": "4.1.6",
                            "title": "Implement wakeup mechanism",
                            "description": "Use PostQueuedCompletionStatus for wakeup. Verify: wakes poll.",
                            "status": "pending"
                        },
                        {
                            "id": "4.1.7",
                            "title": "Implement Close",
                            "description": "Close IOCP handle, cleanup workers. Verify: clean shutdown.",
                            "status": "pending"
                        },
                        {
                            "id": "4.1.8",
                            "title": "Test: Basic socket I/O",
                            "description": "Read/write on Windows socket. Verify: data transferred.",
                            "status": "pending"
                        },
                        {
                            "id": "4.1.9",
                            "title": "Test: Timer functionality",
                            "description": "ScheduleTimer on Windows. Verify: fires correctly.",
                            "status": "pending"
                        },
                        {
                            "id": "4.1.10",
                            "title": "Test: Multiple FDs",
                            "description": "Register 10 FDs. Verify: all events received.",
                            "status": "pending"
                        },
                        {
                            "id": "4.1.11",
                            "title": "Test: Stress test",
                            "description": "1000 I/O operations on Windows. Verify: all complete.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                },
                {
                    "id": "4.2",
                    "title": "Nested Timeout Clamping",
                    "description": "Implement HTML5 spec-compliant 4ms clamping for nested timeouts.",
                    "subtasks": [
                        {
                            "id": "4.2.1",
                            "title": "Add nestingDepth counter",
                            "description": "Add `nestingDepth atomic.Int32` to Loop. Verify: field exists.",
                            "status": "pending"
                        },
                        {
                            "id": "4.2.2",
                            "title": "Increment on timer callback entry",
                            "description": "In timer execution, increment nestingDepth. Verify: increments.",
                            "status": "pending"
                        },
                        {
                            "id": "4.2.3",
                            "title": "Decrement on timer callback exit",
                            "description": "After timer callback, decrement nestingDepth. Verify: decrements.",
                            "status": "pending"
                        },
                        {
                            "id": "4.2.4",
                            "title": "Clamp delay if depth > 5",
                            "description": "In ScheduleTimer, clamp delay to 4ms if nestingDepth > 5. Verify: clamping applied.",
                            "status": "pending"
                        },
                        {
                            "id": "4.2.5",
                            "title": "Test: Nested < 5 levels",
                            "description": "5 nested setTimeout(0). Verify: 0ms delays honored.",
                            "status": "pending"
                        },
                        {
                            "id": "4.2.6",
                            "title": "Test: Nested > 5 levels",
                            "description": "10 nested setTimeout(0). Verify: 4ms clamping after level 5.",
                            "status": "pending"
                        },
                        {
                            "id": "4.2.7",
                            "title": "Test: Mixed nesting",
                            "description": "Alternating nested and non-nested timers. Verify: clamping correct.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                },
                {
                    "id": "4.3",
                    "title": "Cross-Platform Verification",
                    "description": "Verify all tests pass on Linux, macOS, and Windows.",
                    "subtasks": [
                        {
                            "id": "4.3.1",
                            "title": "Run tests on Linux",
                            "description": "Execute full test suite on Linux. Verify: all pass.",
                            "status": "pending"
                        },
                        {
                            "id": "4.3.2",
                            "title": "Run tests on macOS",
                            "description": "Execute full test suite on macOS. Verify: all pass.",
                            "status": "pending"
                        },
                        {
                            "id": "4.3.3",
                            "title": "Run tests on Windows",
                            "description": "Execute full test suite on Windows. Verify: all pass.",
                            "status": "pending"
                        },
                        {
                            "id": "4.3.4",
                            "title": "Run benchmarks cross-platform",
                            "description": "Compare benchmark results across platforms. Verify: within 20% variance.",
                            "status": "pending"
                        },
                        {
                            "id": "4.3.5",
                            "title": "Update CI configuration",
                            "description": "Add Windows to CI matrix. Verify: CI runs on all platforms.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                }
            ]
        },
        {
            "id": "5",
            "title": "Phase 5: Performance Optimization (P1)",
            "status": "pending",
            "description": "Zero-allocation hot paths and cache line optimization.",
            "subtasks": [
                {
                    "id": "5.1",
                    "title": "Zero-Allocation Hot Paths",
                    "description": "Eliminate allocations in critical paths.",
                    "subtasks": [
                        {
                            "id": "5.1.1",
                            "title": "Add task object pool",
                            "description": "Create sync.Pool for Task structs. Verify: pool exists.",
                            "status": "pending"
                        },
                        {
                            "id": "5.1.2",
                            "title": "Use pool in Submit",
                            "description": "Get task from pool, return after execution. Verify: 0 B/op in benchmark.",
                            "status": "pending"
                        },
                        {
                            "id": "5.1.3",
                            "title": "Add timer object pool",
                            "description": "Create sync.Pool for timer structs. Verify: pool exists.",
                            "status": "pending"
                        },
                        {
                            "id": "5.1.4",
                            "title": "Use pool in ScheduleTimer",
                            "description": "Get timer from pool, return after fire/cancel. Verify: reduced allocs.",
                            "status": "pending"
                        },
                        {
                            "id": "5.1.5",
                            "title": "Inline wakePipe byte",
                            "description": "Store wake byte in Loop struct, reuse. Verify: 0 allocs per wake.",
                            "status": "pending"
                        },
                        {
                            "id": "5.1.6",
                            "title": "Benchmark before/after",
                            "description": "Compare B/op before and after optimizations. Verify: measurable reduction.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                },
                {
                    "id": "5.2",
                    "title": "Cache Line Optimization",
                    "description": "Optimize struct layout for CPU cache efficiency.",
                    "subtasks": [
                        {
                            "id": "5.2.1",
                            "title": "Analyze Loop struct layout",
                            "description": "Document current field sizes and cache line boundaries. Verify: analysis complete.",
                            "status": "pending"
                        },
                        {
                            "id": "5.2.2",
                            "title": "Group hot fields",
                            "description": "Place frequently accessed fields on first cache line. Verify: layout updated.",
                            "status": "pending"
                        },
                        {
                            "id": "5.2.3",
                            "title": "Add padding between hot/cold",
                            "description": "Add padding to prevent false sharing. Verify: padding exists.",
                            "status": "pending"
                        },
                        {
                            "id": "5.2.4",
                            "title": "Benchmark cache effects",
                            "description": "Run BenchmarkPerf_CacheLine. Verify: improved or stable.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                },
                {
                    "id": "5.3",
                    "title": "Performance Monitoring",
                    "description": "Add runtime metrics collection.",
                    "subtasks": [
                        {
                            "id": "5.3.1",
                            "title": "Define Metrics struct",
                            "description": "Add struct with latency percentiles, TPS counters. Verify: struct exists.",
                            "status": "pending"
                        },
                        {
                            "id": "5.3.2",
                            "title": "Add metrics to Loop",
                            "description": "Add optional `metrics *Metrics` to Loop. Verify: field exists.",
                            "status": "pending"
                        },
                        {
                            "id": "5.3.3",
                            "title": "Implement RecordLatency",
                            "description": "Track latency samples, compute percentiles. Verify: percentiles accurate.",
                            "status": "pending"
                        },
                        {
                            "id": "5.3.4",
                            "title": "Implement TPS tracking",
                            "description": "Count tasks per second with rolling window. Verify: TPS reported.",
                            "status": "pending"
                        },
                        {
                            "id": "5.3.5",
                            "title": "Add queue depth tracking",
                            "description": "Record current/max queue depths. Verify: depths reported.",
                            "status": "pending"
                        },
                        {
                            "id": "5.3.6",
                            "title": "Test: Metrics accuracy",
                            "description": "Compare metrics to manual timing. Verify: within 5% of manual.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                }
            ]
        },
        {
            "id": "6",
            "title": "Phase 6: Documentation & Finalization",
            "status": "pending",
            "description": "Complete documentation and final verification.",
            "subtasks": [
                {
                    "id": "6.1",
                    "title": "API Documentation",
                    "description": "Document all public APIs.",
                    "subtasks": [
                        {
                            "id": "6.1.1",
                            "title": "Document eventloop.JS",
                            "description": "Add godoc for all public methods. Verify: go doc renders correctly.",
                            "status": "pending"
                        },
                        {
                            "id": "6.1.2",
                            "title": "Document goja adapter",
                            "description": "Add godoc for goja-eventloop package. Verify: go doc renders correctly.",
                            "status": "pending"
                        },
                        {
                            "id": "6.1.3",
                            "title": "Document Promise API",
                            "description": "Add godoc for Promise struct and methods. Verify: go doc renders correctly.",
                            "status": "pending"
                        },
                        {
                            "id": "6.1.4",
                            "title": "Add README.md",
                            "description": "Create comprehensive README with examples. Verify: README exists.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                },
                {
                    "id": "6.2",
                    "title": "Final Verification",
                    "description": "Complete final testing and verification.",
                    "subtasks": [
                        {
                            "id": "6.2.1",
                            "title": "Run make all",
                            "description": "Execute `make` to run all checks. Verify: all pass.",
                            "status": "pending"
                        },
                        {
                            "id": "6.2.2",
                            "title": "Run tests with -race",
                            "description": "Execute all tests with race detector. Verify: no races.",
                            "status": "pending"
                        },
                        {
                            "id": "6.2.3",
                            "title": "Run benchmarks",
                            "description": "Execute full benchmark suite. Verify: meets performance targets.",
                            "status": "pending"
                        },
                        {
                            "id": "6.2.4",
                            "title": "Verify cross-platform CI",
                            "description": "Confirm CI passes on all platforms. Verify: green CI.",
                            "status": "pending"
                        }
                    ],
                    "status": "pending"
                }
            ]
        }
    ]
}